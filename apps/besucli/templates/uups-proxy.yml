# ==============================================================================
# Template para Deploy de Proxy UUPS
# BesuCLI - Proxy UUPS Configuration
# ==============================================================================

# Configurações do contrato proxy
contract:
  name: "MyTokenProxy"
  symbol: "MTK"
  description: "Proxy UUPS para MyToken"
  type: "ERC-20-Proxy"

# Configurações do proxy
proxy:
  type: "UUPS"
  implementation: "0x1234567890123456789012345678901234567890"  # Endereço da implementação
  owner: "{{wallet_address}}"  # Endereço do owner (será substituído)
  upgradeable: true
  proxy_admin: false  # UUPS não usa ProxyAdmin

# Configurações de inicialização
initializer:
  function: "initialize"  # Nome da função inicializadora
  args:
    - "MyToken"          # Nome do token
    - "MTK"              # Símbolo
    - "18"               # Decimais
    - "1000000000000000000000000"  # Supply inicial (1 milhão)

# Configurações de gas
gas:
  limit: 4000000
  price: "0"  # Gas gratuito para Besu

# Configurações do compilador
compiler:
  version: "v0.8.19"
  optimization_enabled: true
  optimization_runs: 200

# Metadados
metadata:
  license: "MIT"
  website_url: "https://example.com"
  github_url: "https://github.com/example/mytoken"
  documentation_url: "https://docs.example.com"
  tags:
    - "proxy"
    - "uups"
    - "upgradeable"
    - "erc-20"
    - "besu"

# Configurações de deploy
deploy:
  auto_verify: true
  save_deployment: true
  wait_confirmations: 2
  timeout: 300

# Configurações específicas para UUPS
uups:
  # Verificar se a implementação é compatível com UUPS
  check_implementation: true

  # Funções obrigatórias que devem existir na implementação
  required_functions:
    - "upgradeTo(address)"
    - "upgradeToAndCall(address,bytes)"
    - "implementation()"
    - "owner()"

  # Funções opcionais
  optional_functions:
    - "renounceOwnership()"
    - "transferOwnership(address)"

  # Configurações de segurança
  security:
    # Verificar se o owner não é endereço zero
    check_owner_not_zero: true

    # Verificar se a implementação não é endereço zero
    check_implementation_not_zero: true

    # Verificar se a implementação tem código
    check_implementation_has_code: true

# Configurações de rede
network:
  name: "hubweb3-besu"
  chain_id: 1337
  rpc_url: "http://144.22.179.183"

# Configurações da API
api:
  base_url: "http://localhost:8080/api"
  timeout: 30
  max_retries: 3

# Configurações de backup
backup:
  enabled: true
  directory: "./backups/proxies"
  retention_days: 90
  auto_backup: true

# Configurações de logging
logging:
  level: "info"
  file_enabled: true
  file_path: "./proxy-deployments.log"

# Configurações específicas para Besu
besu:
  # Usar transações legacy (obrigatório para Besu)
  legacy_transactions: true

  # Gas gratuito
  gas_free: true

  # Configurações de confirmação
  confirmation_timeout: 60
  required_confirmations: 2

  # Configurações de retry
  auto_retry: true
  max_retries: 3
  retry_delay: 5
